<div class="card h-100 shadow-sm">
  <!-- صورة المنتج -->
  <a [routerLink]="['/products', product.id]" class="text-decoration-none text-dark">
    <img [src]="product.pictureUrl" class="card-img-top" alt="{{ product.name }}"
      style="height:200px; object-fit:cover;">
    <div class="card-body">
      <h5 class="card-title">{{ product.name }}</h5>
      <p class="card-text text-truncate">{{ product.description }}</p>
    </div>
  </a>

  <div class="card-footer d-flex justify-content-center align-items-center">
    <!-- الوضع الافتراضي -->
    <ng-container *ngIf="!addButton">
      <button class="btn btn-success me-2" (click)="showQuantityInput()">
        <i class="bi bi-cart-plus me-1"></i> Add To Cart
      </button>
      <button class="btn btn-primary me-2" [routerLink]="['/products', product.id]">
        <i class="bi bi-eye me-1"></i> View Details
      </button>
      <span class="fw-bold">{{ product.price }} L.E</span>
    </ng-container>

    <!-- عند الضغط على Add To Cart -->
    <div class="d-flex gap-2" *ngIf="addButton">
      <input type="number" class="form-control" [(ngModel)]="amount" min="1" style="width:70px;" />
      <button class="btn btn-danger" (click)="confirmAdd()">
        <i class="bi bi-check2 me-1"></i> Add
      </button>
      <button class="btn btn-secondary" (click)="cancelAdd()">
        <i class="bi bi-x-lg"></i> Cancel
      </button>
    </div>
  </div>
</div>
